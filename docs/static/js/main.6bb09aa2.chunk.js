(this.webpackJsonpffmpeg_front=this.webpackJsonpffmpeg_front||[]).push([[0],{180:function(e,t,n){e.exports=n(291)},185:function(e,t,n){},186:function(e,t,n){},193:function(e,t){},194:function(e,t){},195:function(e,t){},196:function(e,t){},200:function(e,t){},202:function(e,t){},238:function(e,t){},239:function(e,t){},291:function(e,t,n){"use strict";n.r(t);var a,r=n(0),i=n.n(r),c=n(12),o=n.n(c),l=n(340),u=n(162),s=n(339),m=n(81),p=(n(185),n(186),n(344)),d=n(342),f=n(65),g=n(330),b=n(336),v=n(343),h=n(335),y=n(37),E=n(320),x=n(324),O=Object(y.a)(E.a).withConfig({displayName:"Layout__StyledToolbar",componentId:"sc-1a9ga25-0"})(["display:flex;align-items:center;justify-content:space-between;"]),j=i.a.memo((function(e){var t=e.children,n=e.headerAction;return i.a.createElement(i.a.Fragment,null,i.a.createElement(d.a,{flexDirection:"column",width:"100%",display:"flex"},i.a.createElement(x.a,{position:"relative"},i.a.createElement(O,null,i.a.createElement(f.a,{variant:"h6",color:"inherit",noWrap:!0},"FFMPEG Online"),n)),t))}));function F(e){var t=e.maxSize,n=e.accept,a=e.children,r=e.onFileLoaded,c=i.a.useRef();return i.a.useEffect((function(){c.current=document.createElement("input");var e=c.current;return e.style.display="none",e.accept=n,e.type="file",e.onchange=function(n){var a=n.target.files[0];a&&(e.value="",t&&a.size>t||r(a))},document.body.appendChild(c.current),function(){return document.body.removeChild(c.current)}}),[r]),a((function(){return c.current&&c.current.click()}))}!function(e){e.VIDEO="video/*"}(a||(a={})),F.defaultProps={accept:a.VIDEO};var w=i.a.memo(F),k=n(155);function C(){var e=Object(k.a)(["\n  cursor: pointer;\n  border: 2px dashed gray;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]);return C=function(){return e},e}var S=Object(y.a)(d.a)(C()),A=n(325),L=n(293),P=n(326),z=n(327),R=n(328),_=n(157),I=n.n(_),M=n(156),W=n.n(M),D=Object(y.a)(A.a).withConfig({displayName:"FileMenuItem__StyledList",componentId:"v5uyqk-0"})(["li{.MuiListItem-secondaryAction{padding-right:16px;transition:padding-right 0.2s;}.file_menu_item_actions{transition:opacity 0.2s;opacity:0;}:hover{.MuiListItem-secondaryAction{padding-right:80px;}.file_menu_item_actions{opacity:1;}}}"]),N={noWrap:!0,display:"block"},V=i.a.memo((function(e){var t=e.files,n=e.selectedFileNames,a=e.toggleFileSelected,r=e.downloadFile,c=e.removeFile;return i.a.createElement(D,{disablePadding:!0},t.map((function(e){return i.a.createElement(L.a,{key:e.name,button:!0,selected:n[e.name],onClick:function(){return a(e)}},i.a.createElement(P.a,{primary:e.name,primaryTypographyProps:N}),i.a.createElement(z.a,{className:"file_menu_item_actions"},i.a.createElement(R.a,{size:"small",onClick:function(){return r(e)}},i.a.createElement(W.a,null)),i.a.createElement(R.a,{size:"small",onClick:function(){return c(e)}},i.a.createElement(I.a,null))))})))})),U=i.a.memo((function(e){var t=e.files,n=e.selectedFileNames,a=e.newFileLoader,r=e.toggleFileSelected,c=e.downloadFile,o=e.removeFile;return i.a.createElement(i.a.Fragment,null,i.a.createElement(d.a,{flex:1,overflow:"scroll"},i.a.createElement(A.a,null,i.a.createElement(V,{files:t,selectedFileNames:n,toggleFileSelected:r,removeFile:o,downloadFile:c}))),a)})),B=n(329),T=i.a.memo((function(e){var t=e.loading,n=e.uploadFile;return i.a.createElement(d.a,{display:"flex",flex:1,justifyContent:"center",alignItems:"center"},t?i.a.createElement(i.a.Fragment,null,i.a.createElement(B.a,null),i.a.createElement(f.a,null,"Loading FFMPEG library...")):i.a.createElement(w,{onFileLoaded:n},(function(e){return i.a.createElement(S,{padding:"100px 180px",onClick:e},i.a.createElement(f.a,null,"Click here to select file"))})))})),H=y.a.code.withConfig({displayName:"LoggerView__StyledCode",componentId:"i68fz2-0"})(["white-space:pre-wrap;overflow:scroll;background-color:white;padding:12px;flex:1;"]),G=i.a.memo((function(e){var t=e.logRef;return i.a.createElement(d.a,{flexDirection:"column",display:"flex",height:"100%"},i.a.createElement(d.a,{padding:"18px",display:"flex",alignItems:"center",justifyContent:"flex-end"},i.a.createElement(g.a,{onClick:function(){return t.current.innerHTML=""}},"Clear logs")),i.a.createElement(H,{ref:t}))})),J=n(348),q=n(352),K=n(346),Q=n(347),X=n(345),Y=n(331),Z=i.a.memo((function(e){var t=e.children,n=e.label,a=e.node,r=e.enable,c=e.disable,o=!!a;return i.a.createElement(d.a,{display:"flex",marginRight:"18px",height:"56px"},i.a.createElement(Y.a,{control:i.a.createElement(X.a,{checked:o,onChange:o?c:r}),label:n}),o&&t())})),$=Object(K.a)((function(e,t,n,a){n(Object(Q.a)(e,a,t))})),ee=n(19);function te(e){return function(t){t&&t.target?e(t.target.value):e(null)}}var ne=i.a.memo((function(e){var t=e.commandArguments,n=e.setArguments,a=t.output.resize;return i.a.createElement(Z,{node:a,label:"Resize",enable:function(){return $(["output","resize"],t,n,["",""])},disable:function(){return $(["output","resize"],t,n,null)}},(function(){return i.a.createElement(d.a,{width:"200px",display:"flex"},i.a.createElement(q.a,{title:"horizontal pixel size of the video",placement:"bottom-start"},i.a.createElement(J.a,{label:"Width",value:a[0],placeholder:"1920",onChange:te($(["output","resize",0],t,n))})),i.a.createElement(d.a,{width:"10px"}),i.a.createElement(q.a,{title:"vertical pixel size of the video",placement:"bottom-start"},i.a.createElement(J.a,{label:"Height",value:a[1],placeholder:"1080",onChange:te($(["output","resize",1],t,n))})))}))})),ae=i.a.memo((function(e){var t=e.commandArguments,n=e.setArguments,a=t.input.extractPartition;return i.a.createElement(Z,{node:a,label:"Extract partition",enable:function(){return $(["input","extractPartition"],t,n,["",""])},disable:function(){return $(["input","extractPartition"],t,n,null)}},(function(){return i.a.createElement(d.a,{width:"350px",display:"flex"},i.a.createElement(q.a,{title:"Start trimming video from",placement:"bottom-start"},i.a.createElement(J.a,{label:"Start",placeholder:"00:00:00",value:a[0],onChange:te($(["input","extractPartition",0],t,n))})),i.a.createElement(d.a,{width:"10px"}),i.a.createElement(q.a,{title:"Video trimming length",placement:"bottom-start"},i.a.createElement(J.a,{label:"Length",value:a[1],placeholder:"00:00:00",onChange:te($(["input","extractPartition",1],t,n))})))}))})),re=i.a.memo((function(e){var t=e.commandArguments,n=e.setArguments,a=t.input.bitrate;return i.a.createElement(Z,{node:a,label:"Bitrate",enable:function(){return $(["input","bitrate"],t,n,["",""])},disable:function(){return $(["input","bitrate"],t,n,null)}},(function(){return i.a.createElement(d.a,{width:"300px",display:"flex"},i.a.createElement(q.a,{title:"Video bitrate",placement:"bottom-start"},i.a.createElement(J.a,{label:"Video",placeholder:"4m",value:a[0],onChange:te($(["input","bitrate",0],t,n))})),i.a.createElement(d.a,{width:"10px"}),i.a.createElement(q.a,{title:"Audio bitrate",placement:"bottom-start"},i.a.createElement(J.a,{label:"Audio",placeholder:"128k",value:a[1],onChange:te($(["input","bitrate",1],t,n))})))}))})),ie=[{name:"Copy original",value:"copy"},{name:"H.264",value:"libx264"},{name:"H.265",value:"libx265",disabled:!0},{name:"MPEG-4 (part 2)",value:"mpeg4"},{name:"AV1",value:"libaom-av1",disabled:!0},{name:"VP8",value:"libvpx",disabled:!0},{name:"VP9 (google)",value:"libvpx-vp9",disabled:!0},{name:"Apple ProRes",value:"prores",supportedOutputs:["mkv"]}],ce=[{name:"Copy original",value:"copy"},{name:"Vorbis",value:"libvorbis",disabled:!0},{name:"AAC",value:"aac"},{name:"OPUS",value:"opus"}],oe=i.a.memo((function(e){var t=e.commandArguments,n=e.type,a=e.label,r=e.items,c=e.setArguments,o=$(["input",n],t,c);return i.a.createElement(Z,{node:t.input[n],label:a,enable:function(){return o("copy")},disable:function(){return o(null)}},(function(){return i.a.createElement(d.a,{width:"140px",display:"flex"},i.a.createElement(h.a,{variant:"outlined",fullWidth:!0},i.a.createElement(v.a,{value:t.input[n],onChange:te(o)},r.map((function(e){var t=e.name,n=e.value,a=e.disabled;return i.a.createElement(b.a,{key:n,disabled:a,value:n},t)})))))}))})),le=function(e){return i.a.createElement(oe,Object.assign({},e,{label:"Video Codec",type:"videoCodec",items:ie}))},ue=function(e){return i.a.createElement(oe,Object.assign({},e,{label:"Audio Codec",type:"audioCodec",items:ce}))},se=i.a.memo((function(e){return i.a.createElement(d.a,{display:"flex",flexWrap:"wrap"},i.a.createElement(ne,e),i.a.createElement(ae,e),i.a.createElement(re,e),i.a.createElement(le,e),i.a.createElement(ue,e))})),me=n(30),pe=n.n(me),de=n(49),fe=n(13),ge=n(350),be=n(351),ve=n(337),he=n(338),ye=n(80),Ee=n(41),xe=n(160),Oe=n(161),je=n(165),Fe=n(64),we=n.e(3).then(n.bind(null,354)),ke=function(e){function t(e){var n;return Object(ye.a)(this,t),(n=Object(xe.a)(this,Object(Oe.a)(t).call(this))).ffmpegModuleString=e,n.worker=void 0,n.init(),n}return Object(je.a)(t,e),Object(Ee.a)(t,[{key:"init",value:function(){var e=Object(de.a)(pe.a.mark((function e(){var t,a;return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we;case 2:t=e.sent,a=new Blob(["\nconst exports = {};\n".concat(this.ffmpegModuleString,"\n").concat((r=t.default,n(192).transpileModule(r,{}).outputText),"\nffmpegWorker();\n")]),this.worker=new Worker(URL.createObjectURL(a)),this.prepareWorker();case 6:case"end":return e.stop()}var r}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"prepareWorker",value:function(){var e=this;this.worker.postMessage("".concat(document.location.href,"static/js/"));this.worker.addEventListener("message",(function(t){var n=t.data,a=n.type,r=n.data;switch(a){case"synchronizeFileSystem":e.emit("synchronizeFileSystem",r);break;case"log":e.emit("log",r)}}))}},{key:"run",value:function(e){this.worker.postMessage({type:"run",data:e})}},{key:"loadFile",value:function(e,t){var n=this,a=new FileReader,r=new Blob([t],{type:t.type});return new Promise((function(t){a.onload=function(a){n.worker.postMessage({type:"loadFile",data:{name:e,array:a.target.result}}),t()},a.readAsArrayBuffer(r)}))}},{key:"runWatcher",value:function(e){var t=this,n=function(t){var n=t.data,a=n.type,r=n.data;"fileWatcherTick"===a&&e(r)};return this.worker.addEventListener("message",n),function(){return t.worker.removeEventListener("message",n)}}},{key:"removeFile",value:function(e){this.worker.postMessage({type:"removeFile",data:e})}},{key:"synchronizeFileSystem",value:function(e){this.worker.postMessage({type:"synchronizeFileSystem",data:e})}}]),t}(Fe.EventEmitter),Ce=n(21),Se=n(158),Ae={bitrate:function(e){var t=Object(ee.a)(e,2),n=t[0],a=t[1];return[].concat(Object(Ce.a)(n?["-b:v",n]:[]),Object(Ce.a)(a?["-b:a",a]:[]))},resize:function(e){var t=Object(ee.a)(e,2),n=t[0],a=t[1];return["-vf","scale=".concat(n,":").concat(a)]},extractPartition:function(e){var t=Object(ee.a)(e,2);return["-ss",t[0],"-t",t[1]]},videoCodec:function(e){return["-c:v",e]},audioCodec:function(e){return["-c:a",e]}};function Le(e,t,n){t[e]&&n.push.apply(n,Object(Ce.a)(Ae[e](t[e])))}function Pe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=["ffmpeg","-threads","1","-y","-loglevel","debug","-nostdin"];return e.inputs.forEach((function(e){a.push("-i","".concat(t).concat(e))})),a.push("-strict","-2"),Object.keys(e.arguments.input).forEach((function(t){Le(t,e.arguments.input,a)})),a.push("".concat(t,"output").concat(n,".").concat(e.outputFileExtension)),Object.keys(e.arguments.output).forEach((function(t){Le(t,e.arguments.output,a)})),a}function ze(){var e=i.a.useState((function(){return{inputs:[],outputFileExtension:"mp4",arguments:{input:{audioCodec:"copy",videoCodec:"copy"},output:{}}}})),t=Object(ee.a)(e,2),n=t[0],a=t[1];return{command:n,setInputs:function(e){return a(Object(Se.a)("inputs",e,n))},setOutputExtension:function(e){return a(Object(Se.a)("outputFileExtension",e,n))},getString:function(){return function(e){return Pe(e).join(" ")}(n)},getArray:function(e,t){return Pe(n,e,t)},setArguments:function(e){return a(Object(Se.a)("arguments",e,n))}}}function Re(e,t){var n=i.a.useState(Object(de.a)(pe.a.mark((function e(){var t,n;return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat("/ffmpeg_js_ui","/static/js/ffmpeg-core.js"),e.next=3,fetch(t);case 3:return n=e.sent,e.abrupt("return",n.text());case 5:case"end":return e.stop()}}),e)})))),a=Object(ee.a)(n,1)[0],r=ze(),c=i.a.useState(null),o=Object(ee.a)(c,2),l=o[0],u=o[1],s=i.a.useRef("");function m(){return(m=Object(de.a)(pe.a.mark((function n(r){var i,c,o;return pe.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a;case 2:i=n.sent,c=setInterval((function(){e(s.current),s.current=""}),1e3),r(c),(o=new ke(i)).on("log",(function(e){s.current+="".concat(e,"\n\n")})),o.on("synchronizeFileSystem",t),u(o);case 9:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return i.a.useEffect((function(){var e;return function(e){m.apply(this,arguments)}((function(t){return e=t})),function(){return clearInterval(e)}}),[]),{ffmpegLoaded:!!l,commandApi:r,removeFile:function(e){return l.removeFile(e)},run:function(e){var t,n=(t=r.command,e.find((function(e){return e.name==="output.".concat(t.outputFileExtension)}))?".".concat(Date.now().toString()):""),a=r.getArray("/src/",n);l.run(a)},loadFile:function(e){return l.loadFile(e.name,e.file)},runFilesWatcher:function(e){return l.runWatcher(e)},synchronizeFileSystem:function(e){return l.synchronizeFileSystem(e)}}}function _e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var Ie=function(e){var t=function(){var e=Object(r.useState)(),t=Object(ee.a)(e,2)[1];return function(){return t({})}}(),n=i.a.useRef([]),a=i.a.useState({}),c=Object(ee.a)(a,2),o=c[0],l=c[1],u=Re((function(t){t&&(e.current?e.current.innerHTML+=t:console.log(t))}),(function(e){e.forEach((function(e){var t=e.fileName,a=e.url,r=n.current.find(Object(p.a)("name",t));r&&(r.objectURL=a)})),t()})),s=u.ffmpegLoaded,m=u.commandApi,d=u.run,f=u.loadFile,g=u.runFilesWatcher,b=u.removeFile,v=u.synchronizeFileSystem;i.a.useEffect((function(){s&&g((function(e){var a=!1;Object.keys(e).forEach((function(e){n.current.find(Object(p.a)("name",e))||(n.current=Object(ge.a)({name:e,file:null,objectURL:null},n.current),a=!0)})),a&&v(n.current.map(Object(be.a)("name"))),t()}))}),[s]);var h=i.a.useState(!1),y=Object(ee.a)(h,2),E=y[0],x=y[1];function O(){return(O=Object(de.a)(pe.a.mark((function e(a){return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.current=Object(ge.a)({name:a.name,file:a},n.current),e.next=3,Promise.all(n.current.map(f));case 3:t();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return i.a.useEffect((function(){var e=Object.keys(o);m.setInputs(e),x(!!e.length)}),[o]),{ffmpegLoaded:s,selectedFiles:o,commandApi:m,selectedFilesNotEmpty:E,localFiles:n.current,run:function(){return d(n.current)},toggleSelectFile:function(e){o[e.name]?l(Object(ve.a)([e.name],o)):l(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(n,!0).forEach((function(t){Object(fe.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},o,Object(fe.a)({},e.name,!0)))},uploadFile:function(e){return O.apply(this,arguments)},downloadFile:function(e){var t=document.createElement("a");t.download=e.name,document.body.appendChild(t),e.objectURL?t.href=e.objectURL:t.href=URL.createObjectURL(new Blob([e.file])),t.click(),document.body.removeChild(t)},removeFile:function(e){b(e.name),n.current=Object(he.a)(n.current.findIndex(Object(p.a)("name",e.name)),1,n.current),l(Object(ve.a)([e.name],o))}}},Me=["mp4","avi","mpg","mkv"];var We=i.a.memo((function(){var e=i.a.useRef(null),t=Ie(e),n=t.ffmpegLoaded,a=t.selectedFiles,r=t.commandApi,c=t.selectedFilesNotEmpty,o=t.localFiles,l=t.toggleSelectFile,u=t.uploadFile,s=t.downloadFile,m=t.removeFile,y=t.run,E=r.command.arguments.input.videoCodec,x=i.a.useMemo((function(){return ie.find(Object(p.a)("value",E))}),[E]);return i.a.useEffect((function(){x&&x.supportedOutputs&&r.setOutputExtension(x.supportedOutputs[0])}),[x]),i.a.createElement(j,{headerAction:i.a.createElement(d.a,{display:"flex",alignItems:"center"},c&&i.a.createElement(g.a,{variant:"contained",color:"default",size:"large",onClick:y},"run"))},0===o.length?i.a.createElement(T,{loading:!n,uploadFile:u}):i.a.createElement(d.a,{display:"flex",flex:1,height:"calc(100vh - 64px)"},i.a.createElement(d.a,{height:"100%",width:"20%",padding:"18px",borderRight:"1px solid lightgray",display:"flex",flexDirection:"column"},i.a.createElement(U,{files:o,selectedFileNames:a,newFileLoader:i.a.createElement(w,{onFileLoaded:u},(function(e){return i.a.createElement(S,{padding:"10px 100px",onClick:e},i.a.createElement(f.a,null,"Upload file"))})),downloadFile:s,removeFile:m,toggleFileSelected:l})),i.a.createElement(d.a,{height:"100%",width:"80%",padding:"18px",display:"flex",flexDirection:"column",justifyContent:"space-between"},i.a.createElement(d.a,{padding:"18px",display:"flex"},i.a.createElement(d.a,{bgcolor:"lightgray",marginRight:"18px",flex:1,display:"flex",alignItems:"center",padding:"0 18px"},i.a.createElement("code",null,r.getString())),i.a.createElement(d.a,{width:"100px",marginBottom:"2px"},i.a.createElement(h.a,{variant:"outlined",fullWidth:!0},i.a.createElement(v.a,{value:r.command.outputFileExtension,onChange:te(r.setOutputExtension)},function(e){if(!e)return Me;var t=e.supportedOutputs;return t||Me}(x).map((function(e){return i.a.createElement(b.a,{key:e,value:e},e)})))))),i.a.createElement(d.a,{padding:"18px"},i.a.createElement(se,{commandArguments:r.command.arguments,setArguments:r.setArguments})),i.a.createElement(G,{logRef:e}))))})),De=Object(u.a)({palette:{secondary:{main:s.a[900]},primary:{main:m.a[700]}}});o.a.render(i.a.createElement((function(){return i.a.createElement(l.a,{theme:De},i.a.createElement(We,null))}),null),document.getElementById("root"))}},[[180,1,2]]]);
//# sourceMappingURL=main.6bb09aa2.chunk.js.map